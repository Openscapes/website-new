<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Eli Holmes, Eric Ward, Hélène Scalliet, Corey Clatterbuck, Julie Lowndes">
<meta name="dcterms.date" content="2021-11-12">

<title>Strengthening scientific workflow and team collaboration at NOAA Fisheries</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/favicon/favicon_fullres.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>
    .quarto-title-block .quarto-title-banner,
    .quarto-title-block .quarto-title-banner h1,
    .quarto-title-block .quarto-title-banner h2,
    .quarto-title-block .quarto-title-banner h3,
    .quarto-title-block .quarto-title-banner h4,
    .quarto-title-block .quarto-title-banner h5,
    .quarto-title-block .quarto-title-banner h6
    {
      color: #333333;
background: #F8D98F;
    }
    </style>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/logo/openscapes_hex_badge.png" alt="The Openscapes logo -- orange text that reads 'openscapes' sitting above small berry 'data points'" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">HOME</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-about" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">ABOUT</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-about">    
        <li>
    <a class="dropdown-item" href="../../who_are_we.html" rel="" target="">
 <span class="dropdown-text">WHO ARE WE?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../approach.html" rel="" target="">
 <span class="dropdown-text">OUR APPROACH</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../media.html" rel="" target="">
 <span class="dropdown-text">MEDIA</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../team.html" rel="" target="">
 <span class="dropdown-text">OUR TEAM</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../code_of_conduct.html" rel="" target="">
 <span class="dropdown-text">CODE OF CONDUCT</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-initiatives" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">INITIATIVES</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-initiatives">    
        <li>
    <a class="dropdown-item" href="../../champions_program.html" rel="" target="">
 <span class="dropdown-text">CHAMPIONS PROGRAM</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../reflections_program.html" rel="" target="">
 <span class="dropdown-text">REFLECTIONS PROGRAM</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pathways_to_open_science_program.html" rel="" target="">
 <span class="dropdown-text">PATHWAYS TO OPEN SCIENCE PROGRAM</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../mentors_framework.html" rel="" target="">
 <span class="dropdown-text">MENTORS FRAMEWORK</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html" rel="" target="">
 <span class="menu-text">BLOG</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-get-involved" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">GET INVOLVED</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-get-involved">    
        <li>
    <a class="dropdown-item" href="../../connect.html" rel="" target="">
 <span class="dropdown-text">CONNECT WITH US</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../events.html" rel="" target="">
 <span class="dropdown-text">ATTEND AN EVENT</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../resources.html" rel="" target="">
 <span class="dropdown-text">FIND LEARNING RESOURCES</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/openscapes" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/openscapes" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:hello@openscapes.org" rel="" target=""><i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page">
      <h1 class="title">Strengthening scientific workflow and team collaboration at NOAA Fisheries</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">community</div>
                <div class="quarto-category">champions</div>
                <div class="quarto-category">noaa-fisheries</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Eli Holmes, Eric Ward, Hélène Scalliet, Corey Clatterbuck, Julie Lowndes </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 12, 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block column-page" id="quarto-document-content">




<p><em>In September-October, Openscapes led a 2-month Champions Cohort with the National Oceanic and Atmospheric Administration (NOAA) National Marine Fisheries Service (NMFS), working with over 30 fisheries scientists across four fisheries science centers at NMFS. These scientists were interested in exploring new approaches to scientific and data workflow, data analysis and stewardship, and project management—as it applies to the complex workflow required in analyses and reports involving diverse teams, data flows, and analyses.</em></p>
<p><em>This cohort followed one we led this spring for the Northwest Fisheries Science Center (<a href="https://openscapes.org/blog/2021/05/03/noaa-nwfsc-champions/">NWFSC</a>) and was co-led by Dr.&nbsp;Eli Holmes, who had participated and has a <a href="http://eeholmes.github.io/">long history</a> of open science leadership and teaching at NOAA and beyond. This post focuses on what the cohort setup and participants achieved. It is co-authored with Eli, Eric Ward, and Hélène Scalliet from NOAA NWFSC, who coordinated the cohort, and Corey Clatterbuck from California Waterboards, who assisted. This opportunity is funded by participating science centers and coordinated by NOAA Northwest Fisheries Science Center (NWFSC). See <a href="https://openscapes.org/champions">openscapes.org/champions</a> for more background on the Champions program.</em></p>
<p><em>Quick links:</em></p>
<ul>
<li><em><a href="https://openscapes.github.io/2021-noaa-nmfs/">openscapes.github.io/2021-noaa-nmfs</a> - Cohort webpage</em></li>
<li><em><a href="https://github.com/nmfs-openscapes">github.com/nmfs-openscapes</a> - New NMFS GitHub Organization for coordinating and highlighting open science at NOAA NMFS</em></li>
<li><em><a href="https://github.com/nmfs-openscapes/.github/wiki">github.com/nmfs-openscapes/.github/wiki</a> - Wiki with examples and onboarding resources of open science at NOAA NMFS</em></li>
</ul>
<hr>
<section id="nmfs-cohort-setup-and-structure" class="level2">
<h2 class="anchored" data-anchor-id="nmfs-cohort-setup-and-structure">NMFS Cohort setup and structure</h2>
<p>We worked with Eric Ward earlier this year to lead the Northwest Fisheries Science Center (<a href="https://openscapes.org/blog/2021/05/03/noaa-nwfsc-champions/">NWFSC</a>) cohort with fisheries researchers from Seattle. <a href="https://twitter.com/ericward_/status/1385696492434825221">We were keen to lead a second one</a> to follow up and expand the participation with Openscapes, and were able to include researchers from four different fisheries science centers in the Southeast (SEFSC), Northeast (NEFSC), Northwest (NWFSC), and Alaska (AFSC). We iterated the Champions program based on what we learned from leading three cohorts in the spring, as we described in a separate post about <a href="https://www.openscapes.org/blog/2021/11/03/champions-fall-cohorts-2021/">Fall Cohorts</a>. We were excited for this mix of new and returning champions and interested to support them to make progress on their open data science pathway, no matter where they were starting from.</p>
<p>During the Openscapes Champions sessions, the entire cohort discussed inefficiencies, reproducibility and documentation problems and other team roadblocks in their current scientific workflows. The teaching component of each session involved training in reproducible workflow, team culture, and structuring open team communities that can collaborate effectively with the current and future selves.</p>
<p>Two guest teachers shared about their open data science efforts at NOAA. <a href="https://twitter.com/emilyhmarkowitz">Emily Markowitz</a> (NOAA AFSC) shared how the AFSC is using RMarkdown to automate stock assessment reports to improve efficiency, reproducibility and reduce report errors (slides: <a href="https://docs.google.com/presentation/d/12Jru3DReVH3sO-nG0msAjCNS8PVNuaYSxHi-Bxlkr1E/edit?usp=sharing">Data to Product Workflows</a>). <a href="https://twitter.com/DrFintastic">Chanté Davis</a> (NOAA Fisheries’ West Coast Region) shared about how the West Coast Region has approached staff training in R to increase efficiency in development of WCR reports and response to data requests (slides:<a href="https://docs.google.com/presentation/d/1a620vM5OkOgcUi0I-mQPV5ZTQglRfwSnAb6O41g8tv0/edit?usp=sharing">Expanding OuR Communities</a>). Emily said that with R Markdown workflows for making reports: “We will never guess again” and that it saves so much time and emailing to track things down. Chanté said “Don’t R alone!” and that R has to be in your work plan. She suggests approaching &amp; mapping project management and workflows like a recipe: What is the end product? What are the steps to create the end product? Which of these steps can be automated?</p>
<p>In between the Champions sessions, the cohort learned the in-and-outs of using RStudio, Git and GitHub for team and project management with clinics and 1-on-1 sessions with Eli. Each team also met separately to work on their on goals for improving the team workflow during Seaside Chats (<a href="https://github.com/Openscapes/2021-noaa-nmfs/issues/27">AFSC example</a>), using GitHub Issues and Pathways documents as a way to organize together.</p>
</section>
<section id="what-did-the-participants-achieve" class="level2">
<h2 class="anchored" data-anchor-id="what-did-the-participants-achieve">What did the participants achieve?</h2>
<p>This cohort was an opportunity for NOAA staff to explore and practice open data science approaches, but it was also an opportunity to meet and build relationships with folks from different fisheries science centers. It was exciting to see participants discuss common pain points and learn from each other about strategies that could be reused across centers. Discussion topics included strategies to help diverse teams develop strategies for using GitHub together and organizing R code, as well as articulating differences between final NOAA products vs ongoing work/projects and how open science relates to both.</p>
<p>Many topics/themes that resonated with the 2021 NOAA NMFS Cohort overlapped and reinforced each other. Here are a few examples:</p>
<p><strong>Documenting onboarding &amp; offboarding processes.</strong> Investing time to formally document onboarding and offboarding processes (for federal employees as well as contractors) was a big topic. Both are important to capture institutional knowledge and critical to prepare both for folks leaving their positions and for new folks joining the team. Written documents help others get up to speed faster, and find available datasets, data description guides, and methodologies. It’s critical that they are easily accessible and updatable “living documents” for core or team processes that may occur infrequently.</p>
<p><strong>GitHub projects.</strong> While multiple tools for project collaboration and management exist, this cohort was particularly enthusiastic to learn more about Github projects. The cohort noticed that Github projects are easily used by team members who have different skill sets, job titles, and areas of expertise. Teams started offering other ways to contribute, including discussion boards, Github issues, and Slack. These tools enable asynchronous collaboration that goes “beyond the meetings” and can improve hybrid working conditions. GitHub’s Project Boards{beta} were release just as our cohort ended and Paul McElhaney (NWFSC) shared examples of how it could be used by NOAA teams. Some potential uses for GitHub Projects included:</p>
<ul>
<li>Organize and track data request tasks</li>
<li>Coordinate on/offboarding efforts</li>
<li>Hands-on workflow practice and use using Github</li>
</ul>
<br>
<center>
<img src="../../img/blog/nwfsc-ao-proj-board2.png" width="700px">
<figcaption>
NWFSC Ocean Acidification Group’s GitHub Project Board, see other examples on the <a href="https://github.com/nmfs-openscapes/.github/wiki/11-GitHub-Project-Boards">NMFS-Openscapes Wiki</a>.
</figcaption>
</center>
<p><br></p>
<p><strong>Strategies for community building.</strong> Collaboration is essential within teams and with external partners, but collaborating with people around new technology is challenging and takes time. Discussing next steps for carrying this work forward, one participant summarized it as “not just skills, also culture”, and that helping folks get excited is worth the effort. Strategies included show-by-doing (screensharing), co-working, office hours, and bringing down silos of people who are used to working with (beyond job titles). This includes sharing work earlier (not waiting for work to be perfect-ish before sharing) and building better shared relationships with Google folders.</p>
<blockquote class="blockquote">
<p>“We want to change ‘our next steps’ to ‘our now’” - NMFS team member</p>
</blockquote>
<p><strong><a href="https://github.com/nmfs-openscapes">nmfs-openscapes</a> GitHub Organization.</strong> Eli Holmes (NWFSC) and Em Markowitz (AFSC) have spear-headed the <a href="https://github.com/nmfs-openscapes">nmfs-openscapes</a> GitHub Organization to help coordinate and give visibility to all the open data science work at NMFS — and beyond (see <a href="https://rgovys.github.io/">R-Govys</a>. We especially love the Wiki, a growing resource with examples of<a href="https://github.com/nmfs-openscapes/.github/wiki/02-GitHub-in-Government#github-in-noaa--nmfs">GitHub in gov</a> and<a href="https://github.com/Openscapes/2021-noaa-nmfs/wiki/2-Issues-and-Project-Boards#project-boards">project boards</a>.</p>
<p><br></p>
<p>The NOAA-NMFS Champions Cohort was really a thoughtful and dedicated group, and are so excited for the momentum at NOAA NMFS. The following is a bit more about each NMFS team in the Cohort. And look out for further blogs about what the Openscapes team learned and what’s coming next.</p>
</section>
<section id="nmfs-cohort-teams" class="level2">
<h2 class="anchored" data-anchor-id="nmfs-cohort-teams"><strong>NMFS Cohort teams</strong></h2>
<p><strong>The <a href="https://www.fisheries.noaa.gov/about/northwest-fisheries-science-center">NWFSC</a> Eco/Stock Assessment Team.</strong> This team is working on analyses and visualization of fisheries-dependent and -independent data to inform both groundfish stock assessments and integrated ecosystem assessments (IEA). Potential projects include 1) analysis of ecosystem drivers and associated responses, 2) estimation of species-specific habitats in the context of fishing gear utilization, 3) incorporation of ecosystem considerations into stock assessments, 4) visualization of IEA indicator distributions and trends, and/or 5) development of a strata explorer app.</p>
<p><strong>The NWFSC FEAT Team.</strong> This team will focus on streamlining data tracking/sharing/processing within the Fisheries Engineering and Acoustic Technologies (<a href="https://www.fisheries.noaa.gov/west-coast/sustainable-fisheries/fisheries-engineering-and-acoustic-technologies-team">FEAT</a>) team, as well as improving onboarding/offboarding of personnel, coordinating Pacific hake biomass calculation dataflow for stock assessors, MSE, and other interested parties.</p>
<p><strong>The NWFSC Protected Salmonids Team.</strong> This team will be working on improving data workflow related to protected PNW salmonids. Top issues for this team are more robust data workflows: 1) better data tracking, 2) personnel on-boarding systems, 3) loss of critical connections with our diverse data partners when staff retire or leave, and 4) implementing more automated data workflows. Team members are working on the PNW Viability Reports and on the salmon bycatch RM&amp;E program in the west coast groundfish fisheries.</p>
<p><strong>The NWFSC WRAP Team</strong> is a cross-divisional team from the Fish Ecology and Fisheries Resource and Monitoring divisions. This team is working to coordinate sharing of data for marine ecosystem and life cycle modeling projects.</p>
<p><strong>The <a href="https://www.fisheries.noaa.gov/about/alaska-fisheries-science-center">AFSC</a> Team</strong> is from the Resource Assessment and Conservation Engineering (RACE) division. This team will be working to improve data, code and report workflows for survey data. Data: curation, processing and dissemination, including implementing continuous integration. Code: improving collaboration on code packages survey data processing and prep, streamlining code development and sharing. Reports: automating reports, collaborating on proposal writing, and automating standard data products.</p>
<p><strong>The <a href="https://www.fisheries.noaa.gov/about/southeast-fisheries-science-center">SEFSC</a> Team</strong> is part of the SouthEast Data, Assessment, and Review (<a href="http://sedarweb.org/">SEDAR</a>) in the Sustainable Fisheries division at SEFSC. This team will be working on improving data workflow, automating reports, and collaborating on packages and functions for assessment model output and diagnostics for Southeast stock assessments for the Gulf of Mexico, Caribbean, and Atlantic.</p>
<p><strong>The <a href="https://www.fisheries.noaa.gov/about/northeast-fisheries-science-center">NEFSC</a> Team</strong> is involved in collecting fisheries dependent data in collaboration with the fishing industry. The team is interested in strengthening open science approaches to increase the value of these data by opening the door to new users who have previously been unable to use the data sets due to their complex nature.</p>
<br> <img src="../../img/blog/eli-holmes-github.png" width="500px">
<figcaption>
Example <a href="https://github.com/eeholmes">GitHub page from Dr.&nbsp;Eli Holmes</a> a senior researcher at NOAA who participated in the Spring NWFSC Cohort and then co-led the Fall NMFS Cohort.
</figcaption>
<p><br></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Openscapes is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attributions 4.0 International License</a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">This website is built with ❤️ and <a href="https://quarto.org/">Quarto</a></div>
  </div>
</footer>



</body></html>