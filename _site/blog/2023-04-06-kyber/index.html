<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sean Kross, Julie Lowndes, Stefanie Butland">
<meta name="dcterms.date" content="2023-04-06">

<title>Designing automated workflows, a chat with Dr.&nbsp;Sean Kross</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/favicon/favicon_fullres.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>
    .quarto-title-block .quarto-title-banner,
    .quarto-title-block .quarto-title-banner h1,
    .quarto-title-block .quarto-title-banner h2,
    .quarto-title-block .quarto-title-banner h3,
    .quarto-title-block .quarto-title-banner h4,
    .quarto-title-block .quarto-title-banner h5,
    .quarto-title-block .quarto-title-banner h6
    {
      color: #333333;
background: #F8D98F;
    }
    </style>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/logo/openscapes_hex_badge.png" alt="A stylized landscape showing rolling hills in different shades of orange, with purple flowers along the ridgelines. Subtle gridlines on the hills and circle packing in the flowers give a nod to data in the environment." class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">HOME</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../approach.html" rel="" target="">
 <span class="menu-text">APPROACH</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-about" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">ABOUT</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-about">    
        <li>
    <a class="dropdown-item" href="../../about.html" rel="" target="">
 <span class="dropdown-text">ABOUT US</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../team.html" rel="" target="">
 <span class="dropdown-text">OUR TEAM</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../resources.html" rel="" target="">
 <span class="dropdown-text">OPEN RESOURCES</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../media.html" rel="" target="">
 <span class="dropdown-text">MEDIA</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../code-of-conduct.html" rel="" target="">
 <span class="dropdown-text">CODE OF CONDUCT</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-initiatives" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">INITIATIVES</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-initiatives">    
        <li>
    <a class="dropdown-item" href="../../initiatives.html" rel="" target="">
 <span class="dropdown-text">ALL INITIATIVES</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../initiatives.html#champions-program" rel="" target="">
 <span class="dropdown-text">CHAMPIONS PROGRAM</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../initiatives.html#nasa-openscapes" rel="" target="">
 <span class="dropdown-text">NASA OPENSCAPES</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../initiatives.html#mentors-framework" rel="" target="">
 <span class="dropdown-text">MENTORS FRAMEWORK</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../initiatives.html#pathways-to-open-science-program" rel="" target="">
 <span class="dropdown-text">PATHWAYS TO OPEN SCIENCE PROGRAM</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../initiatives.html#reflections-program" rel="" target="">
 <span class="dropdown-text">REFLECTIONS PROGRAM</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html" rel="" target="">
 <span class="menu-text">BLOG</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-connect" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">CONNECT</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-connect">    
        <li>
    <a class="dropdown-item" href="../../connect.html" rel="" target="">
 <span class="dropdown-text">CONNECT WITH US</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../events.html" rel="" target="">
 <span class="dropdown-text">EVENTS</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/openscapes" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://fosstodon.org/@openscapes" rel="" target=""><i class="bi bi-mastodon" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:hello@openscapes.org" rel="" target=""><i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page">
      <h1 class="title">Designing automated workflows, a chat with Dr.&nbsp;Sean Kross</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">community-call</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Sean Kross, Julie Lowndes, Stefanie Butland </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 6, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block column-page" id="quarto-document-content">




<section id="how-the-kyber-r-package-connects-google-sheets-rmarkdown-github-and-agenda-docs-for-open-education" class="level2">
<h2 class="anchored" data-anchor-id="how-the-kyber-r-package-connects-google-sheets-rmarkdown-github-and-agenda-docs-for-open-education"><strong>How the Kyber R package connects Google Sheets, RMarkdown, GitHub, and Agenda docs for open education</strong></h2>
<p><em>Our 8th Openscapes Community Call featured a ‚Äúcelebrity interview‚Äù with <a href="https://seankross.com/">Dr.&nbsp;Sean Kross</a>. Sean is a Data Staff Scientist at the <a href="https://hutchdatascience.org/">Fred Hutch Data Science Lab</a>. His work includes understanding <a href="https://courses.csail.mit.edu/18.337/2015/docs/50YearsDataScience.pdf">data science as a practice</a>, and approach combines computational, statistical, ethnographic, and design-driven methods. Sean earned his PhD in Human-Computer Interaction at UC San Diego where he was advised by <a href="https://pg.ucsd.edu/">Philip Guo</a>, and interned at Microsoft Research. Before grad school Sean was the Chief Technology Officer at the <a href="https://jhudatascience.org/">Johns Hopkins Data Science Lab</a>. He is a frequent consultant for data analysis and software development projects, and a maintainer of several open source software projects. Sean was interviewed by Stefanie Butland, MSc, Openscapes Team member.</em></p>
<p><em>Quicklinks</em></p>
<ul>
<li><a href="https://youtu.be/K99uqIlhI9s"><em>Video recording</em></a></li>
<li><a href="https://docs.google.com/document/d/1Ok-_axfN9wpmhbmGNkAcrJTCN2b3KuERLp1NrjNOxnc/"><em>Collaborative Notes</em></a></li>
<li><a href="https://docs.google.com/presentation/d/1GrUu4n8M4xsYKmRet3jkfjNapmmwUJAnxzYHJxFCZrM/"><em>Slides</em></a></li>
</ul>
<hr>
<p>Sean joined us from his office-with-a-great-view at Fred Hutch Cancer Center in the South Lake Union area of Seattle.</p>
</section>
<section id="what-is-kyber" class="level2">
<h2 class="anchored" data-anchor-id="what-is-kyber"><strong>What is Kyber?</strong></h2>
<p><a href="https://github.com/openscapes/kyber">Kyber</a> is an R package that contains tools for setting up learning cohorts on GitHub, purpose-built for the <a href="https://www.openscapes.org/champions/">Openscapes Champions Program</a>. Kyber reads in data from Google Sheets and from that creates RMarkdown documents which are then exported to Google Docs. It also sets up repositories and files and organizes people on GitHub. Kyber replaces manual steps with R functions while maintaining the ability to edit outputs so we‚Äôre not constrained by the automation. How cool and practical is that?!</p>
<br>
<center>
<a><img src="../../img/blog/kyber-design.png" width="700px" alt="image of kyber flow design from left to right with Google Sheets icon, horizontal arrow, hexagonal logo of kyber with blue diamond on green background, diagonal arrow pointing up to GitHub and another diagonal arrow pointing down from kyber to hexagonal RMarkdown logo then horizontal arrow pointing to Google Docs icon"></a>
</center>
<br>
<figcaption>
Kyber design
</figcaption>
<p><br></p>
<p>Watch the <a href="https://youtu.be/K99uqIlhI9s?t=2670">video (starting at 44:30)</a> of Julie screensharing Openscapes‚Äô call metadata and RMarkdown components that are the ingredients from which Kyber makes an agenda sandwich ü•™.</p>
</section>
<section id="what-was-the-motivation-for-kyber" class="level2">
<h2 class="anchored" data-anchor-id="what-was-the-motivation-for-kyber"><strong>What was the motivation for Kyber?</strong></h2>
<br>
<center>
<a><img src="../../img/blog/airbnb-work.jpg" width="700px" alt="6 smiling people sit at a round table with their laptops open. Window in background"></a>
</center>
<br>
<figcaption>
Sean Kross joined our 2019 <a href="https://www.openscapes.org/blog/2019/04/25/summit-reflections2/">summit</a> with the inaugural Openscapes Champions
</figcaption>
<p><br></p>
<p>Sean Kross assisted our 2019 Inaugural Openscapes Champions Cohort, learning from and supporting 7 academic marine science research teams. He was deeply involved with the <a href="https://www.openscapes.org/blog/2019/06/12/wins-cohort1/">inaugural</a> Champions Cohort at Openscapes in 2019 and was privy to the manual creation of the infrastructure to make it happen. Sharing that curriculum with more groups would require repetition so:</p>
<ol type="1">
<li><p>Openscapes already makes heavy use of Google Drive and GitHub, how can we use R to bring both together?</p></li>
<li><p>How could we push RMarkdown‚Äôs parameterized reporting features?</p></li>
<li><p>How much automation can we drive with minimal programming for the end-user?</p></li>
</ol>
<p>In Fall 2022, Openscapes ran 4 Cohorts, each with a separate <a href="https://github.com/nmfs-openscapes/2022-noaa-nwfsc-fall">GitHub repo</a> with 40 team members and 40 uniquely-named Markdown files, plus 5 detailed Google Doc lesson agendas listing different start and end dates and times, discussion prompts, and links to slides. Using Kyber was a huge win for saving time and reducing manually-produced errors.</p>
<br>
<center>
<a><img src="../../img/blog/kyber-example-agenda.png" width="700px" alt="image titled Automating processes with kyber. screenshots of Google sheet, plus sign in middle, R code to call kyber, below that is arrow pointing to screenshot of a Google doc agenda produced by those inputs"></a>
</center>
<br>
<figcaption>
An example use of kyber for creating Openscapes Cohort Call agendas
</figcaption>
<p><br></p>
<p>Beyond the nuts and bolts of tool development, we got into some more philosophical discussions. Discussions with our audiences are the best!</p>
</section>
<section id="how-do-you-manage-your-time" class="level2">
<h2 class="anchored" data-anchor-id="how-do-you-manage-your-time"><strong>How do you manage your time?</strong></h2>
<p>As an early career professional with a full time job, consulting, being involved in data science communities, and keeping up with ever-evolving data science tools, how do you manage all of that? Sean feels that working in the open a lot - on GitHub, YouTube, websites - has magnified the perception of the work he does, based on others reusing and resharing. <a href="https://pg.ucsd.edu/">Philip Guo</a>, Sean‚Äôs PhD advisor embraces the concept of ‚Äú<a href="https://www.joelonsoftware.com/2002/01/06/fire-and-motion/">fire and motion</a>‚Äù: it‚Äôs better to be moving forward, even if you‚Äôre just moving forward a little bit. If you have 20 minutes to write 3 sentences for that blog post that you‚Äôve been wanting to write, do it, even if you don‚Äôt know if it will ever be published. After trying lots of tools, Sean uses <a href="https://www.notion.so/">Notion</a> to write ideas and snippets of text that he can come back to later.</p>
<p>Watch the <a href="https://youtu.be/K99uqIlhI9s">recording</a> and browse the <a href="https://docs.google.com/document/d/1Ok-_axfN9wpmhbmGNkAcrJTCN2b3KuERLp1NrjNOxnc/">collaborative notes</a> for Sean‚Äôs thoughts on his motivations for engaging in this kind of tool-development project, adapting the design and some of the functions in Kyber to automate other workflows, why use R for this application rather than using the coding capacity within Google products themselves, and how others can get into this kind of work.</p>
</section>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources"><strong>Resources</strong></h2>
<ul>
<li>Subscribe to Monday Morning Data Science: <a href="https://fhdata.substack.com/">fhdata.substack.com</a>. Your weekly dose of data news from The Fred Hutch Data Science Lab</li>
<li>R Package development (context: how can others get into this)
<ul>
<li><p><a href="https://rpkgdev-mechanics.netlify.app/">Package Development: the Mechanics</a> and the sequel, <a href="https://rpkgdev-rocket.netlify.app/">rOpenSci: Package Development: Not Rocket Science</a> by Ma√´lle Salmon for rOpenSci.</p></li>
<li><p><a href="https://github.com/forwards/workshops/tree/master/package-dev-modules">Forwards Package Development Modules</a></p></li>
<li><p><a href="https://r-pkgs.org/">R-Packages</a> book - Hadley Wickham</p></li>
<li><p><a href="https://bookdown.org/yihui/bookdown/">bookdown: Authoring Books and Technical Documents with R Markdown</a> - Yihui Xie</p></li>
</ul></li>
<li><a href="https://github.com/ropenscilabs/quartificate">quartificate</a> R package to transform Google Docs into Quarto Books, by Ma√´lle Salmon for rOpenSci</li>
<li>Recent <a href="https://podcasters.spotify.com/pod/show/mechanical-ink/episodes/Open-Source-at-GitHub-with-Abigail-Cabunoc-Mayes-and-Naytri-Sramek---Episode002-e1s5i6t">interview with Abby Cabunoc Mayes about open source philosophy</a>: Abby‚Äôs now at GitHub and previously at Mozilla. She created Moz Open Leaders</li>
<li>Jeff Leek has ‚Äú<a href="https://github.com/jtleek/datasharing">the most forked GitHub repo</a>‚Äù &gt; 243,000 forks of How to share data with a statistician</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Openscapes is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attributions 4.0 International License</a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">This website is built with <i class="fa-solid fa-heart" title="a heart" aria-label="heart"></i> and <a href="https://quarto.org/">Quarto</a></div>
  </div>
</footer>



</body></html>